document.addEventListener("DOMContentLoaded",()=>{const e=document.documentElement,t=document.body;function o(t){"dark"===t?(e.classList.add("dark"),localStorage.setItem("theme","dark")):(e.classList.remove("dark"),localStorage.setItem("theme","light"))}document.getElementById("theme-toggle").addEventListener("click",()=>{o("dark"===(e.classList.contains("dark")?"dark":"light")?"light":"dark")});const n=document.getElementById("lang-toggle"),i=document.querySelectorAll("[data-lang-es]");function r(t){e.setAttribute("lang",t),localStorage.setItem("language",t),i.forEach(e=>{const o=e.getAttribute(`data-lang-${t}`);o&&("TITLE"===e.tagName?e.textContent=o:e.placeholder?e.placeholder=o:e.innerHTML=o)}),function(e){const t={es:{title:"Francisco Barrientos - Ingeniero de Software y Datos",description:"Portafolio de Francisco Barrientos, Ingeniero de Software y Datos de la USACH. Ofrezco servicios de desarrollo de software, creación web, consultoría en minería y energía en Chile, y marketing digital.",ogTitle:"Francisco Barrientos - Ingeniero de Software y Datos",ogDescription:"Ingeniero de Software y Datos USACH. Desarrollo web, aplicaciones móviles, consultoría en minería y energía en Chile.",twitterTitle:"Francisco Barrientos - Ingeniero de Software y Datos",twitterDescription:"Portafolio de servicios de desarrollo de software, consultoría en minería, energía y marketing digital en Chile."},en:{title:"Francisco Barrientos - Software & Data Engineer",description:"Portfolio of Francisco Barrientos, Software and Data Engineer from USACH. I offer software development services, web creation, consulting in mining and energy in Chile, and digital marketing.",ogTitle:"Francisco Barrientos - Software & Data Engineer",ogDescription:"Software and Data Engineer from USACH. Web development, mobile applications, consulting in mining and energy in Chile.",twitterTitle:"Francisco Barrientos - Software & Data Engineer",twitterDescription:"Portfolio of software development services, consulting in mining, energy and digital marketing in Chile."}}[e];document.title=t.title;const o=document.querySelector('meta[name="description"]');o&&o.setAttribute("content",t.description);const n=document.querySelector('meta[property="og:title"]');n&&n.setAttribute("content",t.ogTitle);const i=document.querySelector('meta[property="og:description"]');i&&i.setAttribute("content",t.ogDescription);const r=document.querySelector('meta[property="og:locale"]');r&&r.setAttribute("content","es"===e?"es_CL":"en_US");const a=document.querySelector('meta[name="twitter:title"]');a&&a.setAttribute("content",t.twitterTitle);const c=document.querySelector('meta[name="twitter:description"]');c&&c.setAttribute("content",t.twitterDescription)}(t),function(e){const t={es:{"theme-toggle":"Cambiar tema","lang-toggle":"Cambiar idioma","mobile-menu-button":"Abrir menú","scroll-to-top":"Volver arriba"},en:{"theme-toggle":"Toggle theme","lang-toggle":"Change language","mobile-menu-button":"Open menu","scroll-to-top":"Back to top"}};Object.keys(t[e]).forEach(o=>{const n=document.getElementById(o);n&&n.setAttribute("aria-label",t[e][o])})}(t)}n.addEventListener("click",()=>{r("es"===(e.getAttribute("lang")||"es")?"en":"es")});const a=document.getElementById("progress-bar");const c=document.getElementById("logo-back-to-top"),l=document.getElementById("footer-back-to-top"),s=document.getElementById("scroll-to-top");function d(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}c.addEventListener("click",d),l.addEventListener("click",d),s.addEventListener("click",d);const g=document.getElementById("mobile-menu-button"),m=document.getElementById("mobile-menu");g.addEventListener("click",()=>{m.classList.toggle("hidden");const e=g.querySelector("i");e.classList.toggle("fa-bars"),e.classList.toggle("fa-times")}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){if("#"===this.getAttribute("href"))return void(this.id.includes("back-to-top")||e.preventDefault());e.preventDefault();const t=this.getAttribute("href"),o=document.querySelector(t);if(o&&(o.scrollIntoView({behavior:"smooth"}),!m.classList.contains("hidden"))){m.classList.add("hidden");const e=g.querySelector("i");e.classList.add("fa-bars"),e.classList.remove("fa-times")}})});const u=document.querySelectorAll(".blog-open-button"),f=document.querySelectorAll(".blog-close-button");u.forEach(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("data-dialog"),n=document.getElementById(o);n&&(n.showModal(),t.style.overflow="hidden")})}),f.forEach(e=>{e.addEventListener("click",()=>{const t=e.closest("dialog");t&&t.close()})}),document.querySelectorAll("dialog").forEach(e=>{e.addEventListener("click",function(t){const o=e.getBoundingClientRect();o.top<=t.clientY&&t.clientY<=o.top+o.height&&o.left<=t.clientX&&t.clientX<=o.left+o.width||e.close()}),e.addEventListener("close",()=>{t.style.overflow="auto"})});const h=document.getElementById("current-year");h&&(h.textContent=(new Date).getFullYear()),function(){const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;o(e||(t?"dark":"light")),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("theme")||o(e.matches?"dark":"light")})}(),function(){const e=localStorage.getItem("language");r(e||"es")}(),window.addEventListener("scroll",()=>{!function(){const o=(t.scrollTop||e.scrollTop)/(e.scrollHeight-e.clientHeight)*100;a&&(a.style.width=o+"%")}(),e.scrollTop>300?s.classList.add("show"):s.classList.remove("show")})});